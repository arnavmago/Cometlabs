(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2987],{82987:function(e,t,a){"use strict";a.r(t),a.d(t,{DEFAULT:function(){return u}});var n=a(85893),s=a(31130),i=a(33299),o=a(11163),r=a(20377),l=a(87536);let c=e=>{let{children:t,...a}=e,{data:c}=(0,i.useSession)(),m=null==c?void 0:c.user,{enqueueSnackbar:d}=(0,r.Ds)(),g=(0,o.useRouter)(),p=(0,l.cI)({mode:"onChange",defaultValues:{...u,...a}});p.watch(e=>{localStorage.setItem("resumeAutoSaveData",JSON.stringify(e))});let f=async e=>{let t=m?"".concat(s.Hb.DEV_DASHBOARD).concat(m.username):"".concat(s.Hb.SIGNIN_PAGE),a={info:e.info,education:e.education,experience:e.experience,skills:e.skills,projects:e.projects,languages:e.languages,dummyData:e.dummyData,username:e.username};try{let e="Token "+m.accessToken,n=await fetch("https://api-staging.cometlabs.in/user/createProfile",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:e},body:JSON.stringify({profileObj:a})});if(n.ok){let{message:e,error:s}=await n.json();if(e){let e=m;e.name=a.info.name,e.profileImage=a.info.profileImage,localStorage.setItem("user",JSON.stringify(e)),d("Profile Updated",{variant:"success"}),localStorage.removeItem("resumeAutoSaveData"),g.push(t)}else console.log(s)}else if(401==n.status)d("Unauthorised access!!",{variant:"error"});else throw Error("ON FEST DETAIL SAVE: ERROR")}catch(e){console.log("Fest details could not be saved"),console.log(e)}};return(0,n.jsx)(l.RV,{...p,children:(0,n.jsx)("form",{onSubmit:p.handleSubmit(e=>f(e)),children:t})})};t.default=c;let u={info:{name:"",profileImage:"",email:"",bio:"",mobile:0,socials:{facebookUrl:"",instagramUrl:"",twitterUrl:"",githubUrl:"",linkedinUrl:""},Username:""},experience:[{urlName:"",endDate:"",name:"",description:"",position:"",id:"",urlLink:"",startDate:""}],education:[{institution:"",endDate:"",course:"",description:"",id:"",startDate:""}],skills:[{name:""}],languages:[{fluency:"",language:""}],projects:[{highlights:[""],name:"",description:"",project_url:"",id:"",github_repo:"",tags:[{name:""}]}],dummyData:{LineChartGraph:[],PiChartGraph:[],RadarChartGraph:[],gitscore:0},username:""}},11163:function(e,t,a){e.exports=a(96885)}}]);
//# sourceMappingURL=2987.4cc3f3e31bfb58af.js.map