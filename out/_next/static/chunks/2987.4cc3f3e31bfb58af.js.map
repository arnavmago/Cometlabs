{"version":3,"file":"static/chunks/2987.4cc3f3e31bfb58af.js","mappings":"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","sources":["webpack://_N_E/./src/components/User/Dashboard/ResumeForm.tsx","webpack://_N_E/./node_modules/next/router.js","webpack://_N_E/<anon>"],"sourcesContent":["import { DefaultUser } from \"@/backend/functions\";\nimport { InternalLinks } from \"@/content/Links\";\nimport { useSession } from \"next-auth/react\";\nimport { useRouter } from \"next/router\";\nimport { useSnackbar } from \"notistack\";\nimport { FC } from \"react\";\nimport { FormProvider, useForm } from \"react-hook-form\";\n\nimport { ResumeDataType } from \"./types\";\n\n\n\n\nconst ResumeFormProvider: FC<ResumeDataType> = ({ children, ...data }) => {\n  // let resumeState: ResumeDataType = DEFAULT;\n  const { data: session } = useSession();\n  const user: DefaultUser = session?.user as DefaultUser;\n  const { enqueueSnackbar } = useSnackbar();\n  const router = useRouter();\n\n\n\n  const methods = useForm({\n    mode: \"onChange\",\n    defaultValues: { ...DEFAULT, ...data },\n  });\n\n  methods.watch((data) => {\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(\"resumeAutoSaveData\", JSON.stringify(data));\n    }\n  });\n\n  const handleFestFormSubmit = async (data: ResumeDataType) => {\n    const link = user ? `${InternalLinks.DEV_DASHBOARD}${user.username}` : `${InternalLinks.SIGNIN_PAGE}`\n    const RESUME: ResumeDataType = {\n      info: data.info,\n      education: data.education,\n      experience: data.experience,\n      skills: data.skills,\n      projects: data.projects,\n      languages: data.languages,\n      dummyData: data.dummyData,\n      username: data.username\n    };\n    try {\n      const accessToken = \"Token \" + user.accessToken;\n      let res = await fetch(\n        process.env.NEXT_PUBLIC_API_URL + \"/user/createProfile\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json;charset=utf-8\",\n            Authorization: accessToken,\n          },\n          body: JSON.stringify({ profileObj: RESUME }),\n        }\n      );\n      if (res.ok) {\n        const { message, error } = await res.json();\n        if (!!message) {\n          const newuser = user;\n          newuser.name = RESUME.info.name;\n          newuser.profileImage = RESUME.info.profileImage;\n          localStorage.setItem('user', JSON.stringify(newuser));\n\n          enqueueSnackbar(\"Profile Updated\", { variant: \"success\" })\n          localStorage.removeItem(\"resumeAutoSaveData\");\n          router.push(link)\n        } else {\n          console.log(error);\n        }\n      } else if (res.status == 401) {\n        enqueueSnackbar(\"Unauthorised access!!\", { variant: \"error\" })\n      }\n      else {\n        throw new Error(\"ON FEST DETAIL SAVE: ERROR\");\n      }\n    } catch (error) {\n      console.log(\"Fest details could not be saved\");\n      console.log(error);\n    }\n  };\n\n  return <FormProvider {...methods}>\n    <form\n      onSubmit={methods.handleSubmit((data: ResumeDataType) =>\n        handleFestFormSubmit(data)\n      )}\n    >\n      {children}\n    </form>\n  </FormProvider>;\n};\n\nexport default ResumeFormProvider;\n\nexport const DEFAULT: ResumeDataType = {\n  info: {\n    name: \"\",\n    profileImage: \"\",\n    email: \"\",\n    bio: \"\",\n    mobile: 0,\n    socials: {\n      facebookUrl: \"\",\n      instagramUrl: \"\",\n      twitterUrl: \"\",\n      githubUrl: \"\",\n      linkedinUrl: \"\",\n    },\n    Username: \"\",\n  },\n  experience: [\n    {\n      urlName: \"\",\n      endDate: \"\",\n      name: \"\",\n      description: \"\",\n      position: \"\",\n      id: \"\",\n      urlLink: \"\",\n      startDate: \"\"\n    }\n  ],\n  education: [\n    {\n      institution: \"\",\n      endDate: \"\",\n      course: \"\",\n      description: \"\",\n      id: \"\",\n      startDate: \"\"\n    }\n  ],\n  skills: [\n    {\n      name: \"\"\n    },\n  ],\n  languages: [\n    {\n      fluency: \"\",\n      language: \"\"\n    }\n  ],\n  projects: [\n    {\n      highlights: [\n        \"\"\n      ],\n      name: \"\",\n      description: \"\",\n      project_url: \"\",\n      id: \"\",\n      github_repo: \"\",\n      tags: [\n        {\n          name: \"\"\n        }\n      ]\n    }\n  ],\n  dummyData: {\n    LineChartGraph: [],\n    PiChartGraph: [],\n    RadarChartGraph: [],\n    gitscore: 0,\n  },\n  username: \"\"\n};\n","module.exports = require('./dist/client/router')\n"],"names":["ResumeFormProvider","children","data","param","session","useSession","user","enqueueSnackbar","useSnackbar","router","useRouter","methods","useForm","mode","defaultValues","DEFAULT","watch","localStorage","setItem","JSON","stringify","handleFestFormSubmit","link","InternalLinks","concat","username","RESUME","info","education","experience","skills","projects","languages","dummyData","accessToken","res","fetch","process","method","headers","Authorization","body","profileObj","ok","message","error","json","newuser","name","profileImage","variant","removeItem","push","console","log","status","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","FormProvider","form","onSubmit","handleSubmit","__webpack_exports__","email","bio","mobile","socials","facebookUrl","instagramUrl","twitterUrl","githubUrl","linkedinUrl","Username","urlName","endDate","description","position","id","urlLink","startDate","institution","course","fluency","language","highlights","project_url","github_repo","tags","LineChartGraph","PiChartGraph","RadarChartGraph","gitscore","module","exports","__webpack_require__"],"sourceRoot":""}